(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7728:function(e,t,r){Promise.resolve().then(r.bind(r,9796))},9796:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(9268),s=r(6394),n=r.n(s),i=r(6006),o=r(358),h=r(7121);let l=e=>Math.max(0,Math.min(e,255)),c=e=>{if(3!==e.dimension)throw Error("unsupported number of dimensions");if(e.shape[2]<3)throw Error("image must have at least 3 channels");for(let t=0;t<e.shape[0];++t)for(let r=0;r<e.shape[1];++r){let a=e.get(t,r,0),s=e.get(t,r,1),n=e.get(t,r,2);e.set(t,r,0,l(.299*a+.587*s+.114*n)),e.set(t,r,1,l(-.1687*a-.3313*s+.5*n+128)),e.set(t,r,2,l(.5*a-.4187*s-.0813*n+128))}},u=e=>{if(3!==e.dimension)throw Error("unsupported number of dimensions");if(e.shape[2]<3)throw Error("image must have at least 3 channels");for(let t=0;t<e.shape[0];++t)for(let r=0;r<e.shape[1];++r){let a=e.get(t,r,0),s=e.get(t,r,1),n=e.get(t,r,2);e.set(t,r,0,l(a+1.402*(n-128))),e.set(t,r,1,l(a-.34414*(s-128)-.71414*(n-128))),e.set(t,r,2,l(a+1.772*(s-128)))}},d=e=>0===e?Math.SQRT1_2:1,m=(e,t)=>{if(1!==t.dimension)throw RangeError("Row must be 1-dimensional.");let r=t.shape[0];if(Math.log2(r)%1!=0)throw RangeError("Row must have 2^n elements.");let a=Array.from(Array(r).keys()),s=a.map(e=>t.get(e)-128);a.forEach(n=>t.set(n,l(128+(e?a.reduce((e,t)=>e+s[t]*d(t)*Math.SQRT2*Math.cos(Math.PI/r*(n+.5)*t),0):a.reduce((e,t)=>e+s[t]*Math.cos(Math.PI/r*(t+.5)*n),0)*(d(n)*Math.SQRT2/r)))))},f=(e,t)=>{if(2!==t.dimension)throw RangeError("Chunk must be 2-dimensional.");if(8!==t.shape[0]||8!==t.shape[1])throw RangeError("Chunk must be 8x8 elements.");let r=Array.from(Array(8).keys()),a=r.map(e=>r.map(r=>t.get(e,r)-128));r.forEach(s=>r.forEach(n=>t.set(s,n,l(128+(e?r.reduce((e,t)=>e+r.reduce((e,r)=>e+2*d(t)*d(r)*a[t][r]*Math.cos((s+.5)*t*Math.PI/8)*Math.cos((n+.5)*r*Math.PI/8),0),0):r.reduce((e,t)=>e+r.reduce((e,r)=>e+a[t][r]*Math.cos((t+.5)*s*Math.PI/8)*Math.cos((r+.5)*n*Math.PI/8),0),0)*(d(s)*d(n)/32))))))},g=(e,t,r)=>{if(3!==r.dimension)throw RangeError("Image must have 3 dimensions (not be animated).");for(let a=0;a<3;++a){let s=r.pick(null,null,a);if("row"===e)for(let e=0;e<r.shape[1];++e)m(t,s.pick(null,e));else{if(r.shape[0]%8!=0||r.shape[1]%8!=0)throw RangeError("Image dimensions must be multiples of 8.");for(let e=0;e<r.shape[0]/8;++e)for(let a=0;a<r.shape[1]/8;++a)f(t,s.lo(8*e,8*a).hi(8,8))}}},p=async(e,t,r)=>{let a=await (0,h.u)(e);return r||c(a),g(t,r,a),r&&u(a),URL.createObjectURL(new Blob([await (0,h.S)(a,"png")]))};var w=()=>{let[e,t]=i.useState(null),[r,s]=i.useState(!1),[h,l]=i.useState(""),[c,u]=i.useState(""),d=()=>{l(""),u("")};(0,i.useEffect)(d,[e]);let m=e=>async()=>t(new File([await (await fetch(e)).blob()],e)),f=t=>async()=>{if(!e){alert("Please select an image.");return}s(!0),d();try{let r=await p(URL.createObjectURL(e),t,!1);l(r),u(await p(r,t,!0))}catch(e){alert(e)}s(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.z,{value:e,onChange:t,placeholder:"Select a file or choose an example."})}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:m("black.png"),children:"8x8 Black"})," ",(0,a.jsx)("button",{onClick:m("white.png"),children:"8x8 White"})," ",(0,a.jsx)("button",{onClick:m("earth.png"),children:"512x256 Colored"})," ",(0,a.jsx)("button",{onClick:m("soldiers.png"),children:"1024x1024 Grayscale"})]}),e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),(0,a.jsx)(n(),{src:URL.createObjectURL(e),alt:"input preview",width:0,height:0,style:{width:"100%",height:"auto"}}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:f("jpg"),disabled:r,children:"2D JPG-Style Transform"})," ",(0,a.jsx)("button",{onClick:f("row"),disabled:r,children:"1D Row-by-Row Transform (Slow!)"})]}),h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Transformed:"}),(0,a.jsx)(n(),{src:h,alt:"transformed image",width:0,height:0,style:{width:"100%",height:"auto"}})]}):null,c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Restored:"}),(0,a.jsx)(n(),{src:c,alt:"restored image",width:0,height:0,style:{width:"100%",height:"auto"}})]}):null]}):null]})}}},function(e){e.O(0,[126,667,488,744],function(){return e(e.s=7728)}),_N_E=e.O()}]);